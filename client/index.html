<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisBlue Services App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="menu">
        <img src="graphics/Visblue logo.png" alt="VisBlue logo">
        <h2>VisBlue service app</h2>
        <!--
        <button id="menuBtn">knap 1</button>
        <button id="menuBtn">knap 2</button>
        <button id="menuBtn">knap 3</button> 
        -->
    </div>

    <hr>

    <main>
    <div id="data">
        <p>Her skal data vises</p>
    </div>
    </main>
    
    <script src="script.js"></script> 
    <!--<script>
        const API_URL = "https://testserviceapptest.azurewebsites.net/data_update"

        var dataList = [];
        var setup = [];

        getData()
            .then(setUpSite);

        function setUpSite(data) {
            setup = data;
            setup.forEach(element => {
                var div = document.createElement('div');
                div.setAttribute('id', 'datarow')
                div.innerHTML += `
                <p> Batteri (${element.ConnectionDeviceId}): </p>
                <div id="visteData">
                    <p>Alarm discharge 1 = <p id="${element.ConnectionDeviceId}"> </p></p>
                
                <div id="${element.ConnectionDeviceId}-status"></div>    
                </div>
                ` 

                //document.getElementById(element.ConnectionDeviceId).style.backgroundColor = "white";
                document.getElementById("data").appendChild(div);
            });
        } 

        setInterval(() => {
            getData()
                .then(DisplayData);
        }, 2000)


        function getData() {
            return fetch(API_URL)
            .then(res => res.json());
        }

        function DisplayData(data) {
            dataList = data;
            dataList.forEach(dataElement => {
                document.getElementById(dataElement.ConnectionDeviceId).innerHTML = dataElement.Alarm1;
                document.getElementById(dataElement.ConnectionDeviceId).style.height = "2ch";
                document.getElementById(dataElement.ConnectionDeviceId).style.width = "5ch";
                if(dataElement.Alarm1 > 0) {
                    document.getElementById(dataElement.ConnectionDeviceId).style.backgroundColor = "red";
                } else {
                    document.getElementById(dataElement.ConnectionDeviceId).style.backgroundColor = "green";
                }
            });
        }
    </script> -->

</body>
</html>